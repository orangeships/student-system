# 学生财务收支管理系统 - 核心功能交互逻辑（Web原型版）

## 系统架构与页面规划

### 基础页面结构
```
应用路由：
/ → 登录页
/dashboard → 主仪表盘（核心界面）
/transactions → 记账管理页
/budget → 预算设置页
/statistics → 数据统计页
```

## 一级核心功能交互逻辑

### 1. 用户认证系统

**登录页面 (`/`)**
```
功能组件：
- 用户名/密码输入框
- 登录按钮
- 注册链接

交互流程：
1. 用户输入凭据 → 点击登录
2. 验证成功 → 跳转至仪表盘
3. 验证失败 → 显示错误提示
4. 点击注册 → 跳转注册表单（简单扩展）
```

### 2. 主仪表盘 (`/dashboard`)

**页面布局：**
```
顶部导航栏
├── 用户菜单（用户名、退出）
├── 快速导航（仪表盘、记账、预算、统计）
└── 快速记账按钮

主体内容区
├── 预算概览卡片
├── 月度收支摘要
├── 消费分类图表
└── 近期交易列表
```

**核心交互：**
```
预算概览卡片：
- 显示：月度预算总额 / 已用金额 / 剩余金额
- 进度条：可视化预算使用比例
- 点击：跳转至预算设置页

月度收支摘要：
- 显示：本月总收入、总支出、净结余
- 数据：实时从后端API获取

消费分类图表：
- 饼图：各分类消费占比
- 基础交互：悬停显示具体数值

近期交易列表：
- 显示：最近5-10条交易记录
- 点击记录：跳转至记账管理页
- 操作：每条记录右侧有删除图标
```

### 3. 记账管理页 (`/transactions`)

**页面布局：**
```
顶部操作栏
├── 添加记录按钮
├── 时间筛选器（本月、上月、自定义）
├── 分类筛选下拉框
└── 关键词搜索框

交易记录表格
├── 表头：日期、分类、金额、备注、操作
├── 记录行：显示完整交易信息
└── 分页控件：数据过多时分页显示
```

**交互逻辑：**
```
添加记录流程：
1. 点击"添加记录" → 弹出模态框
2. 表单字段：
   - 金额（必填）
   - 分类（下拉选择：餐饮、学习、交通等）
   - 日期（日期选择器，默认今天）
   - 备注（可选）
3. 提交 → 调用API → 刷新列表

记录操作：
- 点击编辑图标 → 在行内或弹窗中编辑
- 点击删除图标 → 确认对话框 → 调用删除API

筛选搜索：
- 选择时间范围 → 立即刷新列表
- 选择分类 → 立即刷新列表  
- 输入关键词 → 防抖搜索（300ms后执行）
```

### 4. 预算设置页 (`/budget`)

**页面布局：**
```
总预算设置区
├── 月度总预算输入框
├── 预算周期选择（按月/按学期）
└── 保存按钮

分类预算分配
├── 表格形式：分类名称 + 预算金额输入框
├── 分类列表：餐饮、学习、交通、娱乐、购物等
└── 自动计算：各分类预算总和显示
```

**交互逻辑：**
```
预算设置：
1. 输入总预算 → 各分类预算按历史比例自动分配
2. 可手动调整各分类预算
3. 点击保存 → 调用API更新预算设置
4. 成功保存 → 显示成功提示

预算验证：
- 分类预算总和不能超过总预算
- 单个分类预算不能为负数
- 输入时实时验证并提示
```

### 5. 数据统计页 (`/statistics`)

**页面布局：**
```
时间范围选择
├── 快捷选项：本月、上月、近3个月、本学期
└── 自定义日期范围选择器

统计图表区
├── 收支趋势图（折线图）
├── 分类消费对比（柱状图）
└── 预算执行情况（环形图）
```

**交互逻辑：**
```
数据筛选：
- 选择时间范围 → 立即刷新所有图表
- 图表间联动：点击某个数据点，其他图表同步筛选

图表基础交互：
- 悬停显示具体数值
- 图例点击显示/隐藏数据系列
- 支持图表导出为图片
```

## 关键数据流与API调用

### 组件间数据流
```
用户操作 → 前端组件状态更新 → API调用 → 后端处理 → 
前端接收响应 → 更新界面状态 → 用户看到结果
```

### 核心API端点
```
认证相关：
POST /api/auth/login
POST /api/auth/register

交易记录：
GET    /api/transactions
POST   /api/transactions
PUT    /api/transactions/:id
DELETE /api/transactions/:id

预算管理：
GET  /api/budget
POST /api/budget

统计数据：
GET /api/statistics/summary
GET /api/statistics/categories
GET /api/statistics/trends
```

## 导航与路由逻辑

### 全局导航
```
顶部导航栏组件：
- Logo/系统名称（点击返回仪表盘）
- 主导航菜单：仪表盘、记账、预算、统计
- 用户菜单：用户名、设置、退出登录

路由逻辑：
- 未登录用户访问任何页面 → 重定向到登录页
- 登录后默认进入仪表盘
- 页面刷新保持登录状态
```


## 错误处理与用户反馈

### 基础反馈机制
```
成功操作：显示绿色成功提示（2秒后自动消失）
操作失败：显示红色错误提示（包含具体错误信息）
数据加载：显示加载状态（旋转图标）
空状态：无数据时显示友好提示和操作引导
```
